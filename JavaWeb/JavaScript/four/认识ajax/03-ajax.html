<!doctype html>
<html>
    <head>
		<!--声明当前页面的编码集：国际编码（utf-8）-->
		<meta http-equiv="Content-Type" content="text/html"charset="UTF-8">
		<title>模板</title>
		<meta name="Keywords" content="">
		<meta name="Description" content="">

		<!--css/js-->
		<style type="text/css">
			p{cursor:pointer;}
		</style>
    </head>

 <body>
	<p id="txt">我是一个p标签</p>
	<!--没有form的提交方式-->
	<input type="text" name='user' placeholder="请输入您的密码" /> <br />
	<input type="password" name='pwd' placeholder='请输入您的密码' /> <br />

	<script type="text/javascript">
		/*
			ajax：发送/接收 数据（不刷新页面，不打开新窗口）
			ajax必须在服务器环境下才能起作用
		*/

		var oP = document.getElementById("txt");
		var oUser = document.getElementsByName("user")[0];
		var oPwd = document.getElementsByName("pwd")[0];
		/*get 方法
		oP.onclick = function(){
			var userVal = oUser.value;
			var pwdVal = oPwd.value;
			if(userVal && pwdVal){
				var data = oUser.name + "=" + userVal +"&"+ oPwd.name + "=" + pwdVal;
				var xhr = new XMLHttpRequest();
				//xhr.open('get', '03-ajax.php', true);
				xhr.open('get', '03-ajax.php'+"?"+data, true);
				xhr.setRequestHeader('content-type' , 'application/x-www-form-urlencoded'); //get方法加上这一句也不报错
				xhr.send();
				xhr.onreadystatechange = function(){
					if(xhr.readyState == 4)
					{
						//alert(xhr.responseText);
						oP.innerHTML = xhr.responseText;
					}
				};
			}
		}
		*/
		oP.onclick = function(){
			var userVal = oUser.value;
			var pwdVal = oPwd.value;
			if(userVal && pwdVal){
				var data = oUser.name + "=" + userVal +"&"+ oPwd.name + "=" + pwdVal;
				var xhr = new XMLHttpRequest();
				//xhr.open('get', '03-ajax.php', true);
				xhr.open('post', '03-ajax.php', true);
				xhr.setRequestHeader('content-type' , 'application/x-www-form-urlencoded'); //post方法需要加上这一句
				xhr.send(data);//发送数据
				xhr.onreadystatechange = function(){
					if(xhr.readyState == 4)
					{
						//alert(xhr.responseText);
						oP.innerHTML = xhr.responseText;
					}
				};
			}
		}
			/*
				1 : var xhr = new XMLHttpRequest();
					创建ajax对象
				
				2 ：xhr.open( 'get' , '01-test.txt' , true );
					（准备工作）
					请求的方式：
						get : 
						post : 
					访问的页面：
						路径
					是否异步：
						true ：异步
						false ：不异步
				
				3 : xhr.send();
					正式发送请求
				
				4 ：xhr.onreadystatechange = function(){
						if ( xhr.readyState == 4 )
						{
							alert( xhr.responseText );
						}
					};

					onreadystatechange ：当请求的状态码发生改变的时候触发
					.readyState ：请求的状态码
						0 ：请求还没准备（open执行之前）
						1 ：请求准备好了（open执行之后）
						2 ：请求正式发送（send执行之后）
						3 ：请求已经受理，有一部分的数据可以用了，还有没有处理完成的
						4 ：请求完全完成
					.responseText ：后台返回的结果（字符串）
			*/

		
	</script>
 </body>
</html>
